{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["/**\n * App: Paypal Donativos\n * \n * @author Leandro Henrique Reis http://henriquereis.com\n */\nangular.module('app', ['flashMessage']).constant('APP', {\n    name: 'The Paypal Donative',\n    debug: false,\n    path: '/'\n}).controller('DonativoController', ['$rootScope', '$scope', '$http', 'APP', 'flash', DonativoController]);\n\nfunction DonativoController($rootScope, $scope, $http, APP, flash) {\n\n    var doacao={\n        'name': 'doaçao',\n        'value': 10\n    };\n\n    $scope.donativo={\n        doacoes: []\n    };\n\n    $scope.$watch('donativo', function(donativo){\n        var total=0;\n        for (var i = $scope.donativo.doacoes.length - 1; i >= 0; i--) {\n            total+=$scope.donativo.doacoes[i].value;\n        };\n        $scope.total=total;\n    },true);\n\n    $scope.contacts={};\n    $scope.sendContacts=false;\n    $scope.aguarde=false;\n    $scope.total=0;\n\n    /**\n     * @param  {string} path\n     * @param  {object} dados\n     * @param  {function} success\n     * @param  {function} error\n     * @param  {object} config\n     *\n     * @return success|error\n     */\n    $rootScope.post = function(path, dados, success, error, config) {\n        config = config ? config : $rootScope.getHeaders();\n        if (APP.debug) {\n            console.log(config);\n        }\n        $http.post(path, dados, config).then(function(response) {\n            if (APP.debug) {\n                console.log(response);\n            }\n\n            if (typeof success==\"function\") {\n                success(response);\n            }\n        }, function(response) {\n            if (APP.debug) {\n                console.log(response);\n            }\n\n            if (typeof error==\"function\") {\n                error(response);\n            }\n        });\n    }\n\n    $rootScope.getHeaders=function()\n    {\n        return {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        };\n    }\n\n    /**\n     * @param  {string} path\n     * @param  {function} success\n     * @param  {function} error\n     * @param  {object} config\n     *\n     * @return success|error\n     */\n    $rootScope.get = function(path, success, error, config) {\n        config = config ? config : $rootScope.getHeaders();\n        $http.get(path, config).then(function(response) {\n            if (typeof success==\"function\") {\n                success(response);\n            }\n        }, function(response) {\n\n            if (typeof error==\"function\") {\n                error(response);\n            }\n        });\n    }\n\n    $scope.save=function(){\n       \tvar doacao=angular.copy($scope.donativo);\n    \tvar save=$http.post;\n    \tvar path='/doar'\n\n        flash.confirm(function(){\n            save(path, doacao).then(function(response){\n                $scope.aguarde=true;\n                location.href=response.data;\n            }, function(response){\n                var errors=[];\n                    angular.forEach(response.data.message,function(error, key){\n                        errors.push(error);\n                    });\n                $scope.errors=errors;\n\n                flash.error(errors,'ERRO!');\n            })\n\n        },'Continuar?','Fazer doação','Sim','Não');\n    }\n\n\t$scope.closeModal=function()\n\t{\n        jQuery(\"#modalContacts\").modal('hide');\n\t}\n\n    $scope.sendContact=function(contact){\n        if (contact.name==undefined || contact.name=='') {\n            flash.warning('Informe seu nome','AVISO!');\n\n            return;\n        }\n\n        if (contact.email==undefined || contact.email=='') {\n            flash.warning('Informe seu email','AVISO!');\n\n            return;\n        }\n\n        if (contact.comments==undefined || contact.comments=='') {\n            flash.warning('Diga alguma coisa','AVISO!');\n\n            return;\n        }\n\n        $scope.sendContacts=true;\n        $rootScope.post('/contacts', contact, function(response){\n            $scope.contacts={};\n            jQuery(\"#modalContacts\").modal('hide');\n            flash.success('Sua mensagem foi enviada com sucesso!','Obrigado!');\n            $scope.sendContacts=false;\n        },function(response){\n            $scope.sendContacts=false;\n            jQuery(\"#modalContacts\").modal('hide');\n            flash.error('Houve uma falha no envio de sua mensgaem, por favor verifique os dados informados');\n\n            if (APP.debug){\n                console.log(response);\n            }\n        });\n    }\n\n    $scope.del=function(doacao)\n    {\n        var index=$scope.donativo.doacoes.indexOf(doacao);\n        $scope.donativo.doacoes.splice(index, 1);\n    }\n    $scope.addDoacao=function()\n    {\n        $scope.donativo.doacoes.push(angular.copy(doacao));\n    }\n\n    $scope.addDoacao();\n}\n"],"sourceRoot":"/source/"}